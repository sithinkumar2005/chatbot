<!DOCTYPE html>
<html>
<head>
<title>Complaint</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">

{% include "base_nav.html" %}

<div class="max-w-xl mx-auto mt-10 bg-white p-5 rounded shadow">

<h2 class="text-xl font-bold mb-3">ğŸ“ Register Complaint</h2>

<textarea id="text"
class="w-full border p-3 rounded"
placeholder="Describe your complaint"></textarea>

<button onclick="submitComplaint()"
class="w-full mt-3 bg-purple-600 text-white py-2 rounded">
Submit
</button>

<div id="result" class="mt-3"></div>

</div>

<script>
async function submitComplaint(){

  const text = document.getElementById("text").value;

  const res = await fetch("/api/complaint/register/",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify({
      department:"General",
      issue_type:"User",
      description:text
    })
  });

  const data = await res.json();

  document.getElementById("result").innerHTML =
    `âœ… Priority: <b>${data.priority}</b>`;
}
</script>

</body>
</html>
