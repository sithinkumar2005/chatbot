<!DOCTYPE html>
<html>
<head>
<title>Chat</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">

{% include "base_nav.html" %}

<div class="max-w-xl mx-auto mt-10 bg-white p-5 rounded shadow">

<h2 class="text-xl font-bold mb-3">ðŸ’¬ Chat Assistant</h2>

<div id="chatBox" class="h-64 border p-3 overflow-y-auto bg-gray-50"></div>

<div class="flex mt-2 gap-2">
<input id="msg" class="flex-1 border rounded px-3 py-2">
<button onclick="sendMessage()" class="bg-blue-600 text-white px-4 py-2 rounded">
Send
</button>
</div>

</div>

<script>
async function sendMessage(){
  const input = document.getElementById("msg");
  const box = document.getElementById("chatBox");

  box.innerHTML += `<div>ðŸ‘¤ ${input.value}</div>`;

  const res = await fetch("/api/chat/", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({message: input.value})
  });

  const data = await res.json();
  box.innerHTML += `<div>ðŸ¤– ${data.reply}</div>`;
  input.value="";
}
</script>

</body>
</html>
